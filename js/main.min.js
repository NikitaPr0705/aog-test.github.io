const body=document.querySelector("body"),sidebar=body.querySelector(".sidebar"),logoHeaderText=body.querySelector(".logo-header-text"),logoHeaderTextLogo=body.querySelector(".logo-header-text img"),cabinetClosed=document.querySelector(".cabinet-closed"),cabinetOpened=document.querySelector(".cabinet-opened");document.addEventListener("DOMContentLoaded",(function(){logoHeaderText.style.zIndex="-2",logoHeaderTextLogo.style.width="0"})),sidebar.addEventListener("mouseenter",(function(){window.innerWidth>=541&&(sidebar.classList.remove("hidden"),cabinetClosed.classList.add("onhover"),cabinetOpened.classList.add("onhover"),logoHeaderText.classList.remove("hidden"),logoHeaderText.style.zIndex="1",logoHeaderTextLogo.style.width="")})),sidebar.addEventListener("mouseleave",(function(){window.innerWidth>=541&&(sidebar.classList.add("hidden"),logoHeaderText.classList.add("hidden"),cabinetClosed.classList.remove("onhover"),cabinetOpened.classList.remove("onhover"),setTimeout((()=>{logoHeaderText.style.zIndex="-2",logoHeaderText.style.width="0",logoHeaderTextLogo.style.width="0"}),300))})),sidebar.addEventListener("mousemove",(function(){window.innerWidth>=541&&(sidebar.classList.remove("hidden"),cabinetClosed.classList.add("onhover"),cabinetOpened.classList.add("onhover"),logoHeaderText.classList.remove("hidden"),logoHeaderText.style.zIndex="1",logoHeaderTextLogo.style.width="")})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("burger"),t=body.querySelector(".sidebar"),o=body.querySelector(".logo-header-text");e.addEventListener("click",(function(){e.classList.toggle("active"),t.classList.toggle("hidden"),o.classList.toggle("hidden"),window.innerWidth,window.innerWidth<=540&&(cabinetClosed.classList.toggle("onhover"),cabinetOpened.classList.toggle("onhover"))}))}));const closeChatBtn=document.querySelector(".close-chat-btn"),chatOpened=document.querySelector(".chatbox-wrapper"),dialogItem=document.querySelectorAll(".dialog-item");closeChatBtn&&closeChatBtn.addEventListener("click",(function(){chatOpened.classList.remove("chat-opened")})),dialogItem&&dialogItem.forEach((e=>{e.addEventListener("click",(()=>{chatOpened.classList.add("chat-opened")}))}));const maxColumns=7;let lastOpenedCard=null,initiallyHiddenItems=new Map;const cards=document.querySelectorAll(".card");function toggleHiddenItems(e,t,o){if(!e)return void console.error("Ошибка: gridContainer не найден.");const n=initiallyHiddenItems.get(o)||[],i=Array.from(t);i.forEach((e=>{n.includes(e)&&console.log("Удален класс hidden у элемента:",e)})),o.classList.contains("opened")||(initiallyHiddenItems.set(o,Array.from(t).filter((e=>e.classList.contains("hidden")))),i.forEach((e=>{initiallyHiddenItems.get(o).includes(e)&&e.classList.add("hidden")}))),updateGridColumns(e,i)}function updateGridColumns(e,t){if(!e)return void console.error("Ошибка: gridContainer не найден.");const o=e.querySelectorAll(".card__info-item:not(.hidden)").length;e.classList.remove(...getColumnClasses()),o<=maxColumns?e.classList.add(`grid-cols-${o}`):e.classList.add(`grid-cols-${maxColumns}`)}function getColumnClasses(){const e=[];for(let t=1;t<=maxColumns;t++)e.push(`grid-cols-${t}`);return e}function toggleCard(e){if(!e)return void console.error("Ошибка: card не найден.");document.querySelectorAll(".card.opened").forEach((t=>{if(t!==e){t.classList.remove("opened");const e=t.querySelector(".grid-cols");if(e){const t=e.querySelectorAll(".card__info-item:not(.hidden)").length;e.classList.remove(...getColumnClasses()),e.classList.add(`grid-cols-${Math.min(t,maxColumns)}`)}}}));const t=e.classList.contains("opened");e.classList.toggle("opened"),lastOpenedCard=t?null:e}let validationCreateAcc;cards.forEach((e=>{const t=e.querySelector(".grid-cols");if(!t)return;const o=t.querySelectorAll(".card__info-item");document.addEventListener("DOMContentLoaded",(()=>{initiallyHiddenItems.set(e,Array.from(o).filter((e=>e.classList.contains("hidden")))),updateGridColumns(t,o)})),e.addEventListener("click",(e=>{if(!e.target.closest(".no-event")){const t=e.target.closest(".card");if(t){const e=t.querySelector(".grid-cols"),o=e.querySelectorAll(".card__info-item");toggleHiddenItems(e,o,t),toggleCard(t)}else console.error("Ошибка: родительская карточка не найдена.")}}))}));let validationLogin,formCreateAcc=document.querySelector("#form-create-acc");if(formCreateAcc){validationCreateAcc=new JustValidate("#form-create-acc");let e=document.querySelector("#phone-create-acc");if(e){new Inputmask("99-9999999").mask(e)}document.querySelector("#email-create-acc")&&validationCreateAcc.addField("#email-create-acc",[{rule:"required",errorMessage:"Enter your email"},{rule:"minLength",value:2},{rule:"email"}]),document.querySelector("#phone-create-acc")&&validationCreateAcc.addField("#phone-create-acc",[{rule:"required",errorMessage:"Enter your phone"}])}let validationProfileInfo,formLogin=document.querySelector("#form-login");if(formLogin){validationLogin=new JustValidate("#form-login"),document.querySelector("#email-login")&&validationLogin.addField("#email-login",[{rule:"required",errorMessage:"Enter your email"},{rule:"minLength",value:2},{rule:"email"}])}let formProfileInfo=document.querySelector("#form-profile-info");if(formProfileInfo){validationProfileInfo=new JustValidate("#form-profile-info");let e=document.querySelector("#phone-profile-info");if(e){new Inputmask("99-9999999").mask(e)}document.querySelector("#email-profile-info")&&validationProfileInfo.addField("#email-profile-info",[{rule:"required",errorMessage:"Enter your email"},{rule:"minLength",value:2},{rule:"email"}]),document.querySelector("#phone-profile-info")&&validationProfileInfo.addField("#phone-profile-info",[{rule:"required",errorMessage:"Enter your phone"}]),document.querySelector("#file")&&validationProfileInfo.addField("#file",[{rule:"maxFilesCount",value:1},{rule:"files",value:{files:{extensions:["jpeg","png","svg"],maxSize:1e6,types:["image/jpeg","image/png","image/svg"]}}}])}MicroModal.init({openTrigger:"data-micromodal-trigger",closeTrigger:"data-micromodal-close",openClass:"is-open",disableScroll:!0,disableFocus:!1,awaitOpenAnimation:!0,awaitCloseAnimation:!0,debugMode:!0}),document.querySelectorAll("[data-micromodal-trigger]").forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".is-open").forEach((e=>{const t=e.getAttribute("id");t!==this.getAttribute("data-micromodal-trigger")&&MicroModal.close(t)}))}))}));const togglePassword=document.querySelectorAll(".toggle-password");togglePassword.forEach((e=>{e.addEventListener("click",(function(){const e=this.previousElementSibling;"password"===e.type?e.type="text":e.type="password"}))}));const tabs=document.querySelectorAll(".tab__btn"),allContent=document.querySelectorAll(".content");let line=document.querySelector(".line");if(tabs.length>0&&line){const e=document.querySelector(".tab__btn.active");if(e){const t=e.offsetWidth;line.style.width=`${t}px`,line.style.left=`${e.offsetLeft}px`}else{const e=tabs[0].offsetWidth;line.style.width=`${e}px`,line.style.left=`${tabs[0].offsetLeft}px`}}tabs.forEach(((e,t)=>{e.addEventListener("click",(()=>{tabs.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),line.style.width=e.offsetWidth+"px",line.style.left=e.offsetLeft+"px",allContent.forEach((e=>e.classList.remove("active"))),allContent[t].classList.add("active")}))}));const todayIcon=document.querySelector(".today-icon");todayIcon&&gsap.fromTo(todayIcon,{opacity:0},{opacity:1,duration:1});const shadowBg=document.querySelector(".shadow-bg");shadowBg&&gsap.fromTo(shadowBg,{opacity:.3},{opacity:1,duration:1.5});const planeImg=document.querySelector(".plane-img");planeImg&&gsap.fromTo(planeImg,{y:1e3,bottom:"0%"},{y:"50%",bottom:"50%",duration:1});const cloudsImg=document.querySelector(".clouds-img");planeImg&&gsap.fromTo(cloudsImg,{y:-1e3,top:"0%"},{y:"-50%",top:"50%",duration:1}),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".green-light"),t=document.querySelectorAll(".red-light");function o(e){let t=0;function o(){t>=0&&(e[t].style.opacity=0,t--,setTimeout(o,83))}!function n(){t<e.length?(e[t].style.opacity=1,t++,setTimeout(n,83)):setTimeout((()=>{t=e.length-1,o()}),333)}()}function n(){o(e),setTimeout((()=>o(t)),1e3)}n(),setInterval(n,2e3)}));const textElement=document.querySelector("h1"),initialGradient="linear-gradient(0deg, #2f2f2f, #2f2f2f 50%, #ffffff 0)",dynamicGradient="linear-gradient(0deg, #3F51B5, #344ee1 30%, #3374e5 50%, #7810eb 70%, #FC0000 100)";function animateGradient(){const e=gsap.timeline({});e.to(textElement,{background:dynamicGradient,duration:1,ease:"linear"}),e.play()}document.addEventListener("DOMContentLoaded",(function(){textElement.classList.toggle("color-change")})),gsap.fromTo(textElement,{opacity:0},{opacity:1,duration:1}),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".content"),t=document.querySelectorAll(".tab-box button"),o=document.querySelector(".pagination-controls");let n=0;const i=5;function l(l){e.forEach(((e,t)=>{t===l?(e.classList.add("active"),function(e){if(o){const t=e.querySelectorAll(".card"),n=Math.ceil(t.length/i);if(0===n)return void(o.innerHTML="");o.setAttribute("data-total-page",n),a(1,n)}}(e)):e.classList.remove("active")})),n=l,t.forEach(((e,t)=>{e.classList.toggle("active",t===l)})),r(1)}function a(e,t){if(o){o.innerHTML="";const n=document.createElement("ul");n.className="pagination-list";const i=3,l=Math.floor(i/2);let d=e-l,c=e+l;if(t<=i?(d=1,c=t):(d<1&&(d=1,c=i),c>t&&(c=t,d=t-i+1)),e>1){const o=document.createElement("li"),i=document.createElement("button");i.id="prev-button",i.className="pagination-button",i.innerHTML='<img src="images/arrow-black-left.svg" alt="arrow left"> Prev',i.disabled=!1,i.addEventListener("click",(o=>{o.preventDefault(),r(e-1),a(e-1,t)})),o.appendChild(i),n.appendChild(o)}else{const e=document.createElement("li"),t=document.createElement("button");t.id="prev-button",t.className="pagination-button",t.innerHTML='<img src="images/arrow-black-left.svg" alt="arrow left"> Prev',t.disabled=!0,e.appendChild(t),n.appendChild(e)}if(d>1){const e=document.createElement("li"),o=document.createElement("a");if(o.href="#",o.textContent="1",o.addEventListener("click",(e=>{e.preventDefault(),r(1),a(1,t)})),e.appendChild(o),n.appendChild(e),d>2){const e=document.createElement("li");e.className="ellipsis",e.textContent="...",n.appendChild(e)}}for(let o=d;o<=c;o++){const i=document.createElement("li"),l=document.createElement("a");l.href="#",l.textContent=o,o===e&&i.classList.add("active"),l.addEventListener("click",(e=>{e.preventDefault(),r(o),a(o,t)})),i.appendChild(l),n.appendChild(i)}if(c<t){if(c<t-1){const e=document.createElement("li");e.className="ellipsis",e.textContent="...",n.appendChild(e)}const e=document.createElement("li"),o=document.createElement("a");o.href="#",o.textContent=t,o.addEventListener("click",(e=>{e.preventDefault(),r(t),a(t,t)})),e.appendChild(o),n.appendChild(e)}if(e<t){const o=document.createElement("li"),i=document.createElement("button");i.id="next-button",i.className="pagination-button",i.innerHTML='Next <img src="images/arrow-black-right.svg" alt="arrow right">',i.disabled=!1,i.addEventListener("click",(o=>{o.preventDefault(),r(e+1),a(e+1,t)})),o.appendChild(i),n.appendChild(o)}else{const e=document.createElement("li"),t=document.createElement("button");t.id="next-button",t.className="pagination-button",t.innerHTML='Next <img src="images/arrow-black-right.svg" alt="arrow right">',t.disabled=!0,e.appendChild(t),n.appendChild(e)}o.appendChild(n)}}function r(t){const o=e[n].querySelectorAll(".card"),l=(t-1)*i,a=l+i;o.forEach(((e,t)=>{e.style.display=t>=l&&t<a?"flex":"none"}))}e.forEach(((e,t)=>{e.id=`content-${t}`;e.querySelectorAll(".card").forEach(((e,o)=>{e.id=`item-${t}-${o}`}))})),t.forEach((e=>{e.addEventListener("click",(()=>{l(parseInt(e.getAttribute("data-content"),10))}))})),l(0)}));